# 7ì¥ ë¹„ë™ê¸° í˜¸ì¶œ
ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ë‹¤ë£° ë•ŒëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‚¬í•­ì„ ê³ ë ¤í•´ì•¼ í•œë‹¤.
- í˜„ì¬ ë¹„ë™ê¸°ëŠ” ì–´ë–¤ ìƒíƒœì¸ê°€?
- ë¹„ë™ê¸° ë™ì‘ì„ ìœ„í•´ í•„ìš”í•œ ì •ë³´ëŠ” ë¬´ì—‡ì¸ê°€?
- ìš”ì²­ì´ ì„±ê³µí–ˆë‹¤ë©´ ë°›ì•„ì˜¨ ì •ë³´ë¥¼ ì–´ë–»ê²Œ ì €ì¥í•˜ê³  ê´€ë¦¬í•  ê²ƒì¸ê°€?
- ìš”ì²­ì´ ì‹¤íŒ¨í–ˆë‹¤ë©´ ì‹¤íŒ¨ì— ëŒ€í•œ ì •ë³´ë¥¼ ì–´ë–»ê²Œ í™•ì¸í•  ê²ƒì¸ê°€?
- ë¹„ë™ê¸° ìš”ì²­ì— ëŒ€í•œ ì½”ë“œë¥¼ ì‰½ê²Œ ìœ ì§€ë³´ìˆ˜í•  ìˆ˜ ìˆë„ë¡ ì–´ë–»ê²Œ êµ¬ì¡°í™”í•˜ê³  ê´€ë¦¬í•  ê²ƒì¸ê°€?

## 7.1 API ìš”ì²­

### 7.1.1 fetchë¡œ API ìš”ì²­í•˜ê¸°
ì‹ ì… ê°œë°œìì¸ ê°œë°œì´ëŠ” ì‚¬ìš©ìê°€ ì¥ë°”êµ¬ë‹ˆë¥¼ ì¡°íšŒí•´ì„œ ë³¼ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ë§Œë“¤ê²Œ ë˜ì—ˆë‹¤. ê·¸ë˜ì„œ fetch í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ì™¸ë¶€ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í–ˆë‹¤.
```typescript
import React, { useEffect, useState } from "react";

const CartBadge: React.FC = () => {
  const [cartCount, setCartCount] = useState(0);

  useEffect(() => {
    fetch("https://api.baemin.com/cart")
      .then((response) => response.json())
      .then(({ cartItem }) => {
        setCartCount(cartItem.length);
      });
  }, []);

  return <>{/*  cartCount ìƒíƒœë¥¼ ì´ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ */}</>;
};
```

ì¥ë°”êµ¬ë‹ˆ ì •ë³´ë¥¼ ë¹„ë™ê¸° í•¨ìˆ˜ì¸ fetchë¡œ ë¶ˆëŸ¬ì™€ ì¥ë°”êµ¬ë‹ˆ ë‚´ë¶€ë¥¼ í™•ì¸í•˜ì—¬ ì¥ë°”êµ¬ë‹ˆì— ë‹´ê¸´ ë¬¼í’ˆì˜ ê°œìˆ˜ë¥¼ ë°°ì§€ ì•„ì´ì½˜ìœ¼ë¡œ ë³´ì—¬ì£¼ëŠ” ê¸°ëŠ¥, ì‚¬ìš©ìì—ê²Œ ì¥ë°”êµ¬ë‹ˆì— ë‹´ì€ ë¬¼í’ˆì„ ë³´ì—¬ì£¼ëŠ” í˜ì´ì§€ êµ¬í˜„ ë“± ì—¬ëŸ¬ ê³³ì—ì„œ ê°™ì€ API URLì„ ë³µë¶™í•˜ì—¬ ì‚¬ìš©í–ˆë‹¤. 
í•˜ì§€ë§Œ ë§Œì•½ 'ì—¬ëŸ¬ ì„œë²„ì— APIë¥¼ ìš”ì²­í•  ë•Œ íƒ€ì„ì•„ì›ƒ ì„¤ì •ì´ í•„ìš”í•˜ë‹¤', 'ëª¨ë“  ìš”ì²­ì— ì»¤ìŠ¤í…€ í—¤ë”ê°€ í•„ìš”í•˜ë‹¤'ì™€ ê°™ì€ ìƒˆë¡œìš´ API ìš”ì²­ ì •ì±…ì´ ì¶”ê°€ë  ë•Œë§ˆë‹¤ ê³„ì†í•´ì„œ ë¹„ë™ê¸° í˜¸ì¶œ ì½”ë“œë¥¼ ìˆ˜ì •í•´ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ë°œìƒí•œë‹¤.


### ì„œë¹„ìŠ¤ ë ˆì´ì–´ë¡œ ë¶„ë¦¬í•˜ê¸°
ì—¬ëŸ¬ API ìš”ì²­ ì •ì±…ì´ ì¶”ê°€ë˜ì–´ ì½”ë“œê°€ ë³€ê²½ë  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ê°ì•ˆí•œë‹¤ë©´, ë¹„ë™ê¸° í˜¸ì¶œ ì½”ë“œëŠ” ì»´í¬ë„ŒíŠ¸ ì˜ì—­ì—ì„œ ë¶„ë¦¬ë˜ì–´ ë‹¤ë¥¸ ì˜ì—­(ì„œë¹„ìŠ¤ ë ˆì–´ì–´)ì—ì„œ ì²˜ë¦¬ë˜ì–´ì•¼ í•œë‹¤.

ì•ìœ¼ ì½”ë“œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…í•˜ë©´ fetch í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ë¶€ë¶„ì´ ì„œë¹„ìŠ¤ ë ˆì´ì–´ë¡œ ì´ë™í•˜ê³ , ìº„í¬ë„ŒíŠ¸ëŠ” ì„œë¹„ìŠ¤ ë ˆì´ì–´ì˜ ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ê·¸ ê²°ê³¼ë¥¼ ë°›ì•„ì™€ ë Œë”ë§í•˜ëŠ” íë¦„ì´ ëœë‹¤.

ê·¸ëŸ¬ë‚˜ ë‹¨ìˆœíˆ fetch í•¨ìˆ˜ë¥¼ ë¶„ë¦¬í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œëŠ” API ìš”ì²­ ì •ì±…ì´ ì¶”ê°€ë˜ëŠ” ê²ƒì„ í•´ê²°í•˜ê¸° ì–´ë µê³ , ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜ë‚˜ ì»¤ìŠ¤í…€ í—¤ë” ì¶”ê°€, ì¿ í‚¤ë¥¼ ì½ì–´ í† í°ì„ ì§‘ì–´ë„£ëŠ” ë“± ë‹¤ì–‘í•œ 
API ì •ì±…ì´ ì¶”ê°€ë  ìˆ˜ ìˆëŠ”ë° ì´ë¥¼ ëª¨ë‘ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ë²ˆê±°ë¡œìš´ ì¼ì´ë‹¤.

```typescript
async function fetchCart() {
  const controller = new AbortController();
  //ë¸Œë¼ìš°ì €ì—ì„œ ì œê³µí•˜ëŠ” apië¡œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ì·¨ì†Œí•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤.
  //ìš”ì²­ì„ ì·¨ì†Œí•˜ë ¤ë©´ controller.abort()ë¥¼ í˜¸ì¶œí•œë‹¤.

  const timeoutId = setTimeout(() => controller.abort(), 5000);
  
  const response = await fetch("https://api.baemin.com/cart", {
    signal: controller.signal,
  });

  clearTimeout(timeoutId);

  return response;
}
```

### Axios í™œìš©í•˜ê¸°
fetchëŠ” ë‚´ì¥ ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ê¸° ë•Œë¬¸ì— ë”°ë¡œ importí•˜ê±°ë‚˜ ì„¤ì¹˜í•  í•„ìš” ì—†ì´ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤. ê·¸ëŸ¬ë‚˜ ë§ì€ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ë©´ ì§ì ‘ êµ¬í˜„í•´ì„œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ë°, ì´ëŸ° ë²ˆê±°ëŸ¬ì›€ì„ ëœì–´ë‚´ê³ ì ëŒ€ì‹  Axios ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤.

```typescript
import axios, { AxiosInstance, AxiosPromise } from "axios";
// AxiosInstance : Axiosë¥¼ í†µí•´ ìƒì„±ëœ ì¸ìŠ¤í„´ìŠ¤ì˜ íƒ€ì…ì´ë‹¤.
// ì´ë¥¼ ì‚¬ìš©í•˜ë©´ ê¸°ë³¸ ì„¤ì •ì„ ê³µìœ í•˜ëŠ” Axios ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤.

// AxiosPromise : Axiosê°€ ë°˜í™˜í•˜ëŠ” Promiseì˜ íƒ€ì…ì´ë‹¤.
// ì‘ë‹µ ë°ì´í„°ë¥¼ ì œë„¤ë¦­ íƒ€ì…ìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆë‹¤.

export type FetchCartResponse = unknown;
export type PostCartRequest = unknown;
export type PostCartResponse = unknown;
// ê° api ìš”ì²­/ì‘ë‹µ íƒ€ì…ì„ ì •ì˜í•œë‹¤.

export const apiRequester: AxiosInstance = axios.create({
  baseURL: "https://api.baemin.com", // ê¸°ë³¸ URL
  timeout: 5000, // 5ì´ˆë’¤ ì™„ë£Œë˜ì§€ ì•Šìœ¼ë©´ ìš”ì²­ ì¤‘ë‹¨
});
// axios.create({}): Axiosì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œë‹¤.

export const fetchCart = (): AxiosPromise<FetchCartResponse> =>
  apiRequester.get<FetchCartResponse>("cart");
// https://api.baemin.com/cartì— GETìš”ì²­

export const postCart = (
  postCartRequest: PostCartRequest
): AxiosPromise<PostCartResponse> =>
  apiRequester.post<PostCartResponse>("cart", postCartRequest);
// https://api.baemin.com/cartì— POSTìš”ì²­
// ìš”ì²­ ë³¸ë¬¸ìœ¼ë¡œ postCartRequestë¥¼ ì „ì†¡
```

ê° ì„œë²„(ì£¼ë¬¸ì„ ì²˜ë¦¬í•˜ëŠ” ì„œë²„ì™€ ì¥ë°”êµ¬ë‹ˆë¥¼ ì²˜ë¦¬í•˜ëŠ” ì„œë²„)ê°€ ë‹´ë‹¹í•˜ëŠ” ë¶€ë¶„ì´ ë‹¤ë¥´ê±°ë‚˜ ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ì˜ ì¼ë¶€ë¡œ í¬í•¨ë  ë•Œ ê¸°ì¡´ì— ì‚¬ìš©í•˜ëŠ” API Entry(Base URL)ì™€ëŠ” ë‹¤ë¥¸ ìƒˆë¡œìš´ URLë¡œ ìš”ì²­í•´ì•¼ í•˜ëŠ” ìƒí™©ì´ ìƒê¸¸ ìˆ˜ ìˆë‹¤.

API Entryê°€ 2ê°œ ì´ìƒì¼ ê²½ìš°ì— ê° ì„œë²„ì˜ ê¸°ë³¸ URLì„ í˜¸ì¶œí•˜ë„ë¡ `orderApiRequester`, `orderCartApiRequester`ê°™ì´ 2ê°œ ì´ìƒì˜ API ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë”°ë¡œ êµ¬ì„±í•´ì•¼ í•œë‹¤. ì´í›„ ë‹¤ë¥¸ URLë¡œ ì„œë¹„ìŠ¤ ì½”ë“œë¥¼ í˜¸ì¶œí•  ë•Œ ê°ê°ì˜ `apiRequester`ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

```typescript
import axios, { AxiosInstance } from "axios";

const defaultConfig = {};

const apiRequester: AxiosInstance = axios.create(defaultConfig);

const orderApiRequester: AxiosInstance = axios.create({
  baseURL: "https://api.baemin.or/",
  ...defaultConfig,
});
const orderCartApiRequester: AxiosInstance = axios.create({
  baseURL: "https://cart.baemin.order/",
  ...defaultConfig,
});

orderApiRequester.get("/order/12345");
// URL: https://api.baemin.or/order/12345

orderCartApiRequester.post("/cart", { itemId: 67890 });
// URL: https://cart.baemin.order/cart
```


### Axios ì¸í„°ì…‰í„° ì‚¬ìš©í•˜ê¸°
ê°ê°ì˜ `requester`ëŠ” ì„œë¡œ ë‹¤ë¥¸ ì—­í• ì„ ë‹´ë‹¹í•˜ëŠ” ë‹¤ë¥¸ ì„œë²„ì´ê¸° ë–„ë¬¸ì— `requester`ë³„ë¡œ ë‹¤ë¥¸ í—¤ë”ë¥¼ ì„¤ì •í•´ì¤˜ì•¼ í•˜ëŠ” ë¡œì§ì´ í•„ìš”í•  ìˆ˜ ìˆë‹¤.

ì´ë•Œ ì¸í„°ì…‰í„° ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´ `requester`ì— ë”°ë¼ ë¹„ë™ê¸° í˜¸ì¶œ ë‚´ìš©ì„ ì¶”ê°€í•´ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆìœ¼ë©°, API ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•  ë•Œ í•˜ë‚˜ì˜ ì—ëŸ¬ ê°ì²´ë¡œ ë¬¶ì–´ ì²˜ë¦¬í•  ìˆ˜ë„ ìˆë‹¤.

```typescript
import axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse } from "axios";

const getUserToken = () => "";
const getAgent = () => "";
const getOrderClientToken = () => "";
const orderApiBaseUrl = "";
const orderCartApiBaseUrl = "";
const defaultConfig = {};
const httpErrorHandler = () => {};

const apiRequester: AxiosInstance = axios.create({ // ê¸°ë³¸ APIìš”ì²­, ë…ë¦½ì ì¸ Axios ì¸ìŠ¤í„´ìŠ¤
  baseURL: "https://api.baemin.com",
  timeout: 5000,
});
// ê³µí†µ í—¤ë” ì„¤ì • í•¨ìˆ˜
const setRequestDefaultHeader = (requestConfig: AxiosRequestConfig) => {
  const config = requestConfig;
  config.headers = {
    ...config.headers,
    "Content-Type": "application/json;charset=utf-8",
    user: getUserToken(),
    agent: getAgent(),
  };
  return config;
};
// ì£¼ë¬¸ ì „ìš©? í—¤ë” ì„¤ì • í•¨ìˆ˜
const setOrderRequestDefaultHeader = (requestConfig: AxiosRequestConfig) => {
  const config = requestConfig;
  config.headers = {
    ...config.headers,
    "Content-Type": "application/json;charset=utf-8",
    "order-client": getOrderClientToken(),
  };
  return config;
};

// `interceptors` ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ headerë¥¼ ì„¤ì •í•˜ëŠ” ê¸°ëŠ¥ì„ ë„£ê±°ë‚˜ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤
apiRequester.interceptors.request.use(setRequestDefaultHeader); 
// ìš”ì²­ ì „ì— ì‹¤í–‰ë  ì¸í„°ì…‰í„° ì„¤ì • - ìš”ì²­ í—¤ë”ë¥¼ ì¶”ê°€ ë° ìˆ˜ì •
// ìš”ì²­ í›„ ì‹¤í–‰ë  ì¸í„°ì…‰í„° ìˆ˜ì • 

const orderApiRequester: AxiosInstance = axios.create({ // ë…ë¦½ì ì¸ Axios ì¸ìŠ¤í„´ìŠ¤
  baseURL: orderApiBaseUrl,
  ...defaultConfig,
});
// ê¸°ë³¸ apiRequesterì™€ëŠ” ë‹¤ë¥¸ headerë¥¼ ì„¤ì •í•˜ëŠ” `interceptors`
orderApiRequester.interceptors.request.use(setOrderRequestDefaultHeader);
// interceptors.request -> ì‘ë‹µ ì „
// interceptors.response -> ì‘ë‹µ í›„

// `interceptors`ë¥¼ ì‚¬ìš©í•´ httpError ê°™ì€ API ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ë„ ìˆë‹¤
orderApiRequester.interceptors.response.use(
  (response: AxiosResponse) => response, // ì •ìƒì´ë©´ ë°˜í™˜
  httpErrorHandler // ì—ëŸ¬ ë°œìƒ ì‹œ ì²˜ë¦¬
);

const orderCartApiRequester: AxiosInstance = axios.create({ // ë…ë¦½ì ì¸ Axios ì¸ìŠ¤í„´ìŠ¤
  baseURL: orderCartApiBaseUrl,
  ...defaultConfig,
});
orderCartApiRequester.interceptors.request.use(setRequestDefaultHeader);
```

ìš”ì²­ ì˜µì…˜ì— ë”°ë¼ ë‹¤ë¥¸ ì¸í„°ì…‰í„°ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ **ë¹Œë”íŒ¨í„´**ì„ ì¶”ê°€í•˜ì—¬ `APIBuilder`ê°™ì€ í´ë˜ìŠ¤ í˜•íƒœë¡œ êµ¬ì„±í•˜ê¸°ë„ í•œë‹¤.


ğŸ“¢ ë¹Œë” íŒ¨í„´(Builder Pattern)
ê°ì²´ ìƒì„±ì„ ë” í¸ë¦¬í•˜ê³  ê°€ë…ì„± ìˆê²Œ ë§Œë“¤ê¸° ìœ„í•œ ë””ìì¸ íŒ¨í„´ ì¤‘ í•˜ë‚˜ë‹¤. ì£¼ë¡œ ë³µì¡í•œ ê°ì²´ì˜ ìƒì„±ì„ ë‹¨ìˆœí™”í•˜ê³ , ê°ì²´ ìƒì„± ê³¼ì •ì„ ë¶„ë¦¬í•˜ì—¬ ê°ì²´ë¥¼ ì¡°ë¦½í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•œë‹¤.

```typescript
import axios, { AxiosPromise } from "axios";

// ì„ì‹œ íƒ€ì´í•‘
export type HTTPMethod = "GET" | "POST" | "PUT" | "DELETE";

export type HTTPHeaders = any;

export type HTTPParams = unknown;

//
class API {
  readonly method: HTTPMethod;

  readonly url: string;

  baseURL?: string;

  headers?: HTTPHeaders;

  params?: HTTPParams;

  data?: unknown;

  timeout?: number;

  withCredentials?: boolean;

  constructor(method: HTTPMethod, url: string) {
    this.method = method;
    this.url = url;
  }

  call<T>(): AxiosPromise<T> {
    const http = axios.create();
    // ë§Œì•½ `withCredential`ì´ ì„¤ì •ëœ APIë¼ë©´ ì•„ë˜ ê°™ì´ ì¸í„°ì…‰í„°ë¥¼ ì¶”ê°€í•˜ê³ , ì•„ë‹ˆë¼ë©´ ì¸í„°ì…‰í„° ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
    if (this.withCredentials) {
      http.interceptors.response.use(
        (response) => response,
        (error) => {
          if (error.response && error.response.status === 401) {
            /* ì—ëŸ¬ ì²˜ë¦¬ ì§„í–‰ */
          }
          return Promise.reject(error);
        }
      );
    }
    return http.request({ ...this });
  }
}

export default API;
```
ì´ì²˜ëŸ¼ ê¸°ë³¸ API í´ë˜ìŠ¤ë¡œ ì‹¤ì œ í˜¸ì¶œ ë¶€ë¶„ì„ êµ¬ì„±í•˜ê³ , ìœ„ì™€ ê°™ì€ APIë¥¼ í˜¸ì¶œí•˜ê¸° ìœ„í•œ ë˜í¼ë¥¼ ë¹Œë” íŒ¨í„´ìœ¼ë¡œ ë§Œë“ ë‹¤.

```typescript
const apiHost = "";

class APIBuilder {
  private _instance: API;

  constructor(method: HTTPMethod, url: string, data?: unknown) {
    this._instance = new API(method, url);
    this._instance.baseURL = apiHost;
    this._instance.data = data;
    this._instance.headers = {
      "Content-Type": "application/json; charset=utf-8",
    };
    this._instance.timeout = 5000;
    this._instance.withCredentials = false;
  }

  // http ë©”ì„œë“œì— ë”°ë¼ APIBuilder ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë©”ì„œë“œë“¤
  static get = (url: string) => new APIBuilder("GET", url);

  static put = (url: string, data: unknown) => new APIBuilder("PUT", url, data);

  static post = (url: string, data: unknown) => new APIBuilder("POST", url, data);

  static delete = (url: string) => new APIBuilder("DELETE", url);

  baseURL(value: string): APIBuilder {
    this._instance.baseURL = value;
    return this;
  }

  headers(value: HTTPHeaders): APIBuilder {
    this._instance.headers = value;
    return this;
  }

  timeout(value: number): APIBuilder {
    this._instance.timeout = value;
    return this;
  }

  params(value: HTTPParams): APIBuilder {
    this._instance.params = value;
    return this;
  }

  data(value: unknown): APIBuilder {
    this._instance.data = value;
    return this;
  }

  withCredentials(value: boolean): APIBuilder {
    this._instance.withCredentials = value;
    return this;
  }

  // êµ¬ì„±ëœ API ê°ì²´ë¥¼ ë°˜í™˜.
  build(): API {
    return this._instance;
  }
}

export default APIBuilder;
```
ì´ì™€ ê°™ì€ íŒ¨í„´ì¸ APIBuilderë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

```typescript
import APIBuilder from "./7.1.4-3";

// ex
type Response<T> = { data: T };
type JobNameListResponse = string[];

const fetchJobNameList = async (name?: string, size?: number) => {
  const api = APIBuilder.get("/apis/web/jobs")
    .withCredentials(true) // ì´ì œ 401 ì—ëŸ¬ê°€ ë‚˜ëŠ” ê²½ìš°, ìë™ìœ¼ë¡œ ì—ëŸ¬ë¥¼ íƒì§€í•˜ëŠ” ì¸í„°ì…‰í„°ë¥¼ ì‚¬ìš©í•˜ê²Œ ëœë‹¤
    .params({ name, size }) // bodyê°€ ì—†ëŠ” axios ê°ì²´ë„ ë¹Œë” íŒ¨í„´ìœ¼ë¡œ ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤
    .build();
  const { data } = await api.call<Response<JobNameListResponse>>();
  return data;
};
```

APIBuilder í´ë˜ìŠ¤ëŠ” **ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸** ì½”ë“œê°€ ë§ë‹¤ëŠ” ë‹¨ì ì„ ê°–ê³  ìˆë‹¤. í•˜ì§€ë§Œ ì˜µì…˜ì´ ë‹¤ì–‘í•œ ê²½ìš°ì— ì¸í„°ì…‰í„°ë¥¼ ì„¤ì •ê°’ì— ë”°ë¼ ì ìš©í•˜ê³ , í•„ìš” ì—†ëŠ” ì¸í„°ì…‰í„°ë¥¼ ì„ íƒì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ë„ ê°€ì§€ê³  ìˆë‹¤.


ğŸ“¢ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸(Boilerplate) ì½”ë“œ
ì–´ë–¤ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ë•Œ ë°˜ë³µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê¸°ë³¸ì ì¸ ì½”ë“œë¥¼ ë§í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ APIë¥¼ í˜¸ì¶œí•˜ê¸° ìœ„í•œ ê¸°ë³¸ì ì¸ ì„¤ì •ê³¼ ì¸í„°ì…‰í„° ë“±ì„ ì„¤ì •í•˜ëŠ” ë¶€ë¶„ì„ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œë¡œ ê°„ì£¼í•  ìˆ˜ ìˆë‹¤.


### API ì‘ë‹µ íƒ€ì… ì§€ì •í•˜ê¸°

ê°™ì€ ì„œë²„ì—ì„œ ì˜¤ëŠ” ì‘ë‹µì˜ í˜•íƒœëŠ” ëŒ€ì²´ë¡œ í†µì¼ë˜ì–´ ìˆì–´ì„œ ì•ì„œ ì†Œê°œí•œ APIì˜ ì‘ë‹µ ê°’ì€ í•˜ë‚˜ì˜ Response íƒ€ì…ìœ¼ë¡œ ë¬¶ì¼ ìˆ˜ ìˆë‹¤.

```typescript
type FetchCartResponse = unknown;
type PostCartRequest = unknown;
type PostCartResponse = unknown;

export interface Response<T> {
  data: T;
  status: string;
  serverDateTime: string;
  errorCode?: string; // FAIL, ERROR errorMessage?: string; // FAIL, ERROR
}
const fetchCart = (): AxiosPromise<Response<FetchCartResponse>> =>
  apiRequester.get<Response<FetchCartResponse>>("cart");

const postCart = (
  postCartRequest: PostCartRequest
): AxiosPromise<Response<PostCartResponse>> =>
  apiRequester.post<Response<PostCartResponse>>("cart", postCartRequest);
```

ì„œë²„ì—ì„œ ì˜¤ëŠ” ì‘ë‹µì„ í†µì¼í•´ì¤„ ë•Œ ì£¼ì˜í•  ì ì€ Response íƒ€ì…ì„ apiRequester ë‚´ì—ì„œ ì²˜ë¦¬í•˜ë ¤ê³  í•  ìˆ˜ ìˆëŠ”ë° ì´ë ‡ê²Œ í•˜ë©´ UPDATEë‚˜ CREATEì™€ ê°™ì´ ì‘ë‹µì´ ì—†ì„ ìˆ˜ ìˆëŠ” APIë¥¼ ì²˜ë¦¬í•˜ê¸° ê¹Œë‹¤ë¡œì›Œì§„ë‹¤.

```typescript
const updateCart = (
  updateCartRequest: unknown
): AxiosPromise<Response<FetchCartResponse>> => apiRequester.get("cart");
// updateCart í•¨ìˆ˜ëŠ” í•­ìƒ íŠ¹ì •í•œ <Response<FetchCartResponse> íƒ€ì…ìœ¼ë¡œ ì‘ë‹µì„ ì²˜ë¦¬í•œë‹¤.
```
ë”°ë¼ì„œ Response íƒ€ì…ì€ apiRequesterê°€ ëª¨ë¥´ê²Œ ê´€ë¦¬ë˜ì–´ì•¼ í•œë‹¤. 

í•´ë‹¹ ê°’ì— ì–´ë–¤ ì‘ë‹µì´ ë“¤ì–´ìˆëŠ”ì§€ ì•Œ ìˆ˜ ì—†ê±°ë‚˜ ê°’ì˜ í˜•ì‹ì´ ë‹¬ë¼ì§€ë”ë¼ë„ ë¡œì§ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ” ê²½ìš°ì—ëŠ” unknowníƒ€ì…ì„ ì‚¬ìš©í•˜ì—¬ ì•Œ ìˆ˜ ì—†ëŠ” ê°’ì„ì„ í‘œí˜„í•œë‹¤.
```typescript
interface response {
  data: {
    cartItems: CartItem[];
    forPass: unknown;
  };
}
```
ë§Œì•½ forPass ì•ˆì— í”„ë¡ íŠ¸ ë¡œì§ì—ì„œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê°’ì´ ìˆë‹¤ë©´, ì—¬ì „íˆ ì–´ë–¤ ê°’ì´ ë“¤ì–´ì˜¬ì§€ ëª¨ë¥´ê¸° ë•Œë¬¸ì— unknownì„ ìœ ì§€í•œë‹¤. ë¡œê·¸ë¥¼ ë‚¨ê¸°ê±°ë‚˜, ë°±ì—”ë“œë¡œ ë‹¨ìˆœíˆ ì „ë‹¬í•˜ëŠ” ê²½ìš°ë¼ë©´ ê°’ì˜ íƒ€ì…ì€ ì–¸ì œë“ ì§€ ë³€ê²½ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ forPass ë‚´ì˜ ê°’ì„ ì‚¬ìš©í•˜ì§€ ì•Šì•„ì•¼ í•œë‹¤. ë‹¤ë§Œ, ì´ë¯¸ ì„¤ê³„ëœ í”„ë¡œë•íŠ¸ì—ì„œ ì“°ê³  ì‡ëŠ” ê°’ì´ë¼ë©´ í”„ë¡ íŠ¸ ë¡œì§ì—ì„œ ì¨ì•¼ í•˜ëŠ” ê°’ì— ëŒ€í•´ì„œë§Œ íƒ€ì…ì„ ì„ ì–¸í•œ ë‹¤ìŒì— ì‚¬ìš©í•˜ëŠ” ê²Œ ì¢‹ë‹¤.

```typescript
type ForPass = {
  type: "A" | "B" | "C";
};

const isTargetValue = () => (data.forPass as ForPass).type === "A";
```

### ë·° ëª¨ë¸(View Model) ì‚¬ìš©í•˜ê¸°

API ì‘ë‹µì€ ë³€í•  ê°€ëŠ¥ì„±ì´ í¬ë‹¤. íŠ¹íˆ ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ëŠ” ì„œë²„ ìŠ¤í™ì´ ìì£¼ ë°”ë€Œê¸° ë•Œë¬¸ì— ë·° ëª¨ë¸ì„ ì‚¬ìš©í•˜ì—¬ API ë³€ê²½ì— ë”°ë¥¸ ë²”ìœ„ë¥¼ í•œì •í•´ì¤˜ì•¼ í•œë‹¤.

```typescript
interface ListResponse {
  items: ListItem[];
}

const fetchList = async (filter?: ListFetchFilter): Promise<ListResponse> => {
  const { data } = await api
    .params({ ...filter })
    .get("/apis/get-list-summaries")
    .call<Response<ListResponse>>();

  return { data };
};
```
í•´ë‹¹ APIë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ë‹¤ìŒì²˜ëŸ¼ ì‚¬ìš©í•œë‹¤. 

```typescript
const ListPage: React.FC = () => {
  const [totalItemCount, setTotalItemCount] = useState(0);
  const [items, setItems] = useState<ListItem[]>([]);

  useEffect(() => {
    // ì˜ˆì‹œë¥¼ ìœ„í•œ API í˜¸ì¶œê³¼ then êµ¬ë¬¸
    fetchList(filter).then(({ items }) => {
      setTotalItemCount(items.length);
      setItems(items);
    });
  }, []);

  return (
    <div>
      <Chip label={totalItemCount} />
      <Table items={items} />
    </div>
  );
};
```
í”íˆ ì¢‹ì€ ì»´í¬ë„ŒíŠ¸ëŠ” ë³€ê²½ë  ì´ìœ ê°€ í•˜ë‚˜ë¿ì¸ ì»´í¬ë„ŒíŠ¸ë¼ê³  ë§í•œë‹¤. API ì‘ë‹µì˜ items ì¸ìë¥¼ ì¢€ ë” ì •í™•í•œ ê°œë…ìœ¼ë¡œ ë‚˜íƒ€ë‚´ê¸° ìœ„í•´ jobItemsë‚˜ cartItems ê°™ì€ ì´ë¦„ìœ¼ë¡œ ìˆ˜ì •í•˜ë©´ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë„ ìˆ˜ì •í•´ì•¼ í•œë‹¤. ì´ë ‡ê²Œ ìˆ˜ì •í•´ì•¼í•  ì»´í¬ë„ŒíŠ¸ê°€ API 1ê°œì— í•˜ë‚˜ë¼ë©´ ì¢‹ê² ì§€ë§Œ, APIë¥¼ ì‚¬ìš©í•˜ëŠ” ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ë„ ìˆ˜ì •ë˜ì–´ì•¼ í•œë‹¤.

ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œ ë·° ëª¨ë¸ì„ ë„ì…í•  ìˆ˜ ìˆë‹¤.

```typescript

```





